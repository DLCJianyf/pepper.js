<html>
<head>
  <title>ppapi.js Examples</title>
</head>
<body style="font-family: Verdana, Geneva, sans-serif; background-color: gray">
<div style="background-color: white; padding: 20px; display: inline-block">
<h2>ppapi.js Examples</h2>
<table id="examples">
  <tr>
    <td width=200><b>Tool</b></td>
    <td colspan=2 width=100><b>Emscripten</b></td>
    <td colspan=2 width=100><b>NaCl</b></td>
    <td colspan=2 width=100><b>PNaCl</b></td>
  </tr>
  <tr>
    <td width=200><b>Mode</b></td>
    <td width=60><b>Dbg</b></td>
    <td width=60><b>Opt</b></td>
    <td width=60><b>Dbg</b></td>
    <td width=60><b>Opt</b></td>
    <td width=60><b>Dbg</b></td>
    <td width=60><b>Opt</b></td>
  </tr>
</table>
<script>
var examples = [
  {"name": "Hello World", "url": "hello_world/data/hello_world.html"},
  {"name": "GetURL", "url": "geturl/data/geturl.html"},
  {"name": "Pi Generator", "url": "pi_generator/data/pi_generator.html"},
  {"name": "Hello World GLES", "url": "hello_world_gles/data/hello_world_gles.html"},
  {"name": "Input Events", "url": "input_events/data/input_events.html"},
  {"name": "Pointer Lock", "url": "mouselock/data/mouselock.html"},
  {"name": "Sine Synth", "url": "sine_synth/data/sine_synth.html"},
  {"name": "Voronoi", "url": "voronoi/data/voronoi.html"},
  {"name": "Earth", "url": "earth/data/earth.html"},
  {"name": "File IO", "url": "file_io/data/file_io.html"},
  {"name": "PPAPI Messaging", "url": "tests/ppapi_messaging/ppapi_messaging.html"},
  {"name": "PPAPI GetURL", "url": "tests/ppapi_geturl/ppapi_geturl.html"},
  {"name": "PPAPI Test Suite", "url": "tests/ppapi/tests/data/test_case.html"},
  {"name": "Stress", "url": "stress/data/stress.html"},
  {"name": "Probe Interfaces", "url": "probe_interfaces/data/probe_interfaces.html"},
];

// Generate a table of examples.
(function() {
  var configs = ["Debug", "Release"];
  var toolchains = [
    {"name": "Emscripten", "tc": "emscripten"},
    {"name": "NaCl", "tc": "newlib"},
    {"name": "PNaCl", "tc": "pnacl"},
  ];
  var table = document.getElementById("examples");
  for (var i in examples) {
    var example = examples[i];
    var row = table.insertRow(-1);
    var addCell = function(contents) {
      var cell = row.insertCell(-1);
      cell.appendChild(contents);
    };
    addCell(document.createTextNode(example.name));
    for (var t in toolchains) {
      for (var c in configs) {
        var a = document.createElement("a");
        a.href = example.url + "?tc=" + toolchains[t].tc + "&config=" + configs[c];
        a.appendChild(document.createTextNode("Run"));
        addCell(a);
      }
    }
  }
})();
</script>
<div style="width: 800px">
<h3>Browser Support</h3>
<h4>Chrome</h4>
<ul>
  <li>To run the NaCl examples, either enable NaCl in about:flags or pass --enable-nacl to Chrome on the command line.</li>
  <li>This is currently the only platform that supports the NaCl examples.</li>
  <li>PNaCl requires Chrome 31 and above.</li>
  <li>Note that "PNaCl Debug" examples are actually NaCl modules
  compiled using the PNaCl toolchain - no translation is being done in
  the browser.  Only "PNaCl Release" translates in the browser.</li>
</ul>
<h4>Firefox</h4>
<ul>
  <li>Firefox <a href="http://nightly.mozilla.org/">nightly</a> is required.  The Web Audio API, etc, are only starting to be supported.</li>
  <li>Switching to fullscreen will unlock the mouse in Firefox.  Locking the mouse outside of fullscreen is only supported in nightly.</li>
  <li>Scaling 3D to fullscreen appears to be slow? TODO: check non-scaled 3D.</li>
</ul>

<h4>Safari</h4>
<ul>
  <li>WebGL must be <a href="https://discussions.apple.com/thread/3300585">manually enabled</a> on Safari.</li>
  <li>Mouse lock is not supported in Safari.</li>
  <li>Voronoi appears to be <i>brutally</i> slow on Safari.</li>
</ul>

<h4>Internet Explorer</h4>
<ul>
  <li>IE10 is partially supported - Graphics_3D, Audio, Fullscreen, and MouseLock APIs cannot be implemented.</li>
  <li>IE9 does not support typed arrays, which means that it cannot run code generated by Emscripten's asm.js backend.  It may be possible to use Emscripten's non-typed array code generation mode, but this has not been investigated (and will be slow).</li>
</ul>

<h4>Mobile</h4>
<ul>
  <li>Not yet tested.</li>
</ul>

<h3>Developer Errata</h3>
<ul>
  <li>Threads are not allowed.  Blocking calls are not allowed.  Only purely asynchonous code can be compiled into both NaCl and JavaScript. Essentially, your program must use the same concurency model as JavaScript to be compiled into JavaScript.</li>
  <li>Using BGRA image formats will result in a silent performance penalty.  In general, web APIs tend to be strongly opinionated that premultiplied RGBA is the image format that should be used.  Any other format must be manually converted into premultiplied RGBA.</li>
  <li>The Graphics2D and Graphics3D interfaces will automatically swap buffers every frame, even if Flush or SwapBuffers is not called.  This behavior should not be noticible for most applications.  Explicit swapping could be emulated by creating an offscreen buffer, but this would cost time and memory.</li>
  <li>The Audio API only supports one sample rate - whatever the underlying Web Audio API uses, which is whatever the OS defaults to, which tends to be a mix of 44.1k and 48k.  48k tends to be more common.  In the future, resampling could be performed as a polyfill, but this would be slow.</li>
  <li>URLLoader intentionally deviates from the native implementation's behavior when it is at odds with XMLHttpRequest.  For example, ppapi.js does not identify CORS failures as PP_ERROR_NOACCESS, instead it returns PP_ERROR_FAILED.</li>
  <li>URLLoader does not stream - the data appears all at once.  This is a consequence of doing an XHR with requestType "arraybuffer", it does not appear to give partial results.</li>
  <li>Input support is a little fiddly due to inconsistencies between browsers.  For example, the delta for scroll wheel events is scaled differently in different browsers.  ppapi.js attempts to normalize this, but in general, cross-platform inconsistencies should be expected in the input event interface.</li>
  <li>If multiple mouse buttons are held, ppapi.js will list all of them as event modifiers.  PPAPI will only list one button - the one with the lowest enum value.  There is a known but where ppapi.js will not update the modifier state if a button is pressed or released outside of ppapi.js's canvas.</li>
  <li>Filesystem is currently supported only by Chrome. (Creation and last access time are not supported.)  A polyfill for Firefox and IE is included in ppapi.js, but it has a few known bugs - such as not being able to resize already existing files, and the Closure compiler renaming fields in persisted data structures, resulting in data incompatability/loss between Debug and Release versions, and possibally between different Release versions.</li>
  <li>Emscripten forcibly undefines __native_client__, and currently this cannot be overriden.  As a workaround, also key off the __EMSCRIPTEN__ define.</li>
  <li>Most of the PPAPI tests have not been ported because they wait for blocking callbacks.</li>
</ul>

<h3>Supported Interfaces</h3>
Note that these interfaces nay not be completely implemented, yet.  In general, functionality is not implemented until there is a test case for it.
<ul>
<li>Audio</li>
<li>AudioConfig</li>
<li>Console</li>
<li>Core</li>
<li>FileIO</li>
<li>FileRef</li>
<li>FileSystem</li>
<li>Fullscreen</li>
<li>Graphics2D</li>
<li>Graphics3D</li>
<li>ImageData</li>
<li>InputEvent</li>
<li>MouseInputEvent</li>
<li>WheelInputEvent</li>
<li>KeyboardInputEvent</li>
<li>Instance</li>
<li>Messaging</li>
<li>MouseLock</li>
<li>URLLoader</li>
<li>URLRequestInfo</li>
<li>URLResponseInfo</li>
<li>Var</li>
<li>VarArrayBuffer</li>
<li>View</li>
</ul>
<h3>Unsupported Interfaces</h3>
<ul>
<li>Gamepad</li>
<li>MessageLoop</li>
<li>MouseCursor</li>
<li>TouchInputEvent</li>
<li>WebSocket</li>
</ul>
</div>
</div>
</body>
</html>
